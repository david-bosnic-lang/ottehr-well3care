export interface Secrets {
  [secretName: string]: string;
}

export const getSecret = (secretKey: string, secrets: Secrets | null): string => {
  let value: string | undefined;
  if (secrets != null) {
    value = secrets[secretKey];
  } else {
    if (process) {
      value = process.env[secretKey];
    }
  }

  if (value == null) {
    throw new Error(`Secret or Environment Variable with key ${secretKey} was not set.`);
  }

  return value;
};

export const getOptionalSecret = (secretKey: string, secrets: Secrets | null, fallback: string): string => {
  let value: string | undefined;
  if (secrets != null) {
    value = secrets[secretKey];
  } else {
    if (process) {
      value = process.env[secretKey];
    }
  }

  if (!value) {
    console.warn(process.env);
    console.warn(`Secret or Environment Variable with key ${secretKey} was not set. Using fallback ${fallback}`);
    return fallback;
  }

  return value;
};

export enum SecretsKeys {
  AUTH0_ENDPOINT = 'AUTH0_ENDPOINT',
  URGENT_CARE_AUTH0_CLIENT = 'URGENT_CARE_AUTH0_CLIENT',
  URGENT_CARE_AUTH0_SECRET = 'URGENT_CARE_AUTH0_SECRET',
  AUTH0_AUDIENCE = 'AUTH0_AUDIENCE',
  FHIR_API = 'FHIR_API',
  PROJECT_API = 'PROJECT_API',
  PROJECT_ID = 'PROJECT_ID',
  PHONE_NUMBER = 'PHONE_NUMBER',
  TEXT_USERNAME = 'TEXT_USERNAME',
  TEXT_PASSWORD = 'TEXT_PASSWORD',
  ENVIRONMENT = 'ENVIRONMENT',
  SENDGRID_API_KEY = 'SENDGRID_API_KEY',
  URGENT_CARE_SENDGRID_EMAIL_BCC = 'URGENT_CARE_SENDGRID_EMAIL_BCC',
  URGENT_CARE_SENDGRID_CONFIRMATION_EMAIL_TEMPLATE_ID = 'URGENT_CARE_SENDGRID_CONFIRMATION_EMAIL_TEMPLATE_ID',
  URGENT_CARE_SENDGRID_CANCELLATION_EMAIL_TEMPLATE_ID = 'URGENT_CARE_SENDGRID_CANCELLATION_EMAIL_TEMPLATE_ID',
  URGENT_CARE_SENDGRID_ERROR_EMAIL_TEMPLATE_ID = 'URGENT_CARE_SENDGRID_ERROR_EMAIL_TEMPLATE_ID',
  URGENT_CARE_URG_VISIT_TYPE = 'URGENT_CARE_URG_VISIT_TYPE',
  URGENT_CARE_ONLINE_VISIT_TYPE = 'URGENT_CARE_ONLINE_VISIT_TYPE',
  URGENT_CARE_TESTING_VISIT_TYPE = 'URGENT_CARE_TESTING_VISIT_TYPE',
  URGENT_CARE_MESSAGING_DEVICE_ID = 'URGENT_CARE_MESSAGING_DEVICE_ID',
  MESSAGING_M2M_CLIENT = 'MESSAGING_M2M_CLIENT',
  MESSAGING_M2M_SECRET = 'MESSAGING_M2M_SECRET',
  URGENT_CARE_MESSAGING_M2M_CLIENT= 'URGENT_CARE_MESSAGING_M2M_CLIENT',
  URGENT_CARE_MESSAGING_M2M_SECRET = 'URGENT_CARE_MESSAGING_M2M_SECRET',
  ORGANIZATION_ID = 'ORGANIZATION_ID',
  WEBSITE_URL = 'WEBSITE_URL',
  MIXPANEL_TOKEN = 'MIXPANEL_TOKEN',

  //telemed

  TELEMED_CLIENT_ID = 'TELEMED_CLIENT_ID',
  TELEMED_CLIENT_SECRET = 'TELEMED_CLIENT_SECRET',
  TELEMED_SENDGRID_EMAIL_BCC = 'TELEMED_SENDGRID_EMAIL_BCC',
  TELEMED_SENDGRID_EMAIL_FROM = 'TELEMED_SENDGRID_EMAIL_FROM',
  TELEMED_SENDGRID_EMAIL_FROM_NAME = 'TELEMED_SENDGRID_EMAIL_FROM_NAME',
  TELEMED_SENDGRID_CONFIRMATION_EMAIL_TEMPLATE_ID = 'TELEMED_SENDGRID_CONFIRMATION_EMAIL_TEMPLATE_ID',
  TELEMED_SENDGRID_CANCELLATION_EMAIL_TEMPLATE_ID = 'TELEMED_SENDGRID_CANCELLATION_EMAIL_TEMPLATE_ID',
  TELEMED_SENDGRID_VIDEO_CHAT_INVITATION_EMAIL_TEMPLATE_ID = 'TELEMED_SENDGRID_VIDEO_CHAT_INVITATION_EMAIL_TEMPLATE_ID',
  TELEMED_CREATE_APPOINTMENT_ZAMBDA_ID = 'TELEMED_CREATE_APPOINTMENT_ZAMBDA_ID',
  TELEMED_SCHEDULE_NUMBER_OF_DAYS_AVAILABLE = 'TELEMED_SCHEDULE_NUMBER_OF_DAYS_AVAILABLE',
  TELEMED_SCHEDULE_SLOT_LENGTH = 'TELEMED_SCHEDULE_SLOT_LENGTH',

  // bh

  AUTH0_CLIENT = 'AUTH0_CLIENT',
  AUTH0_SECRET = 'AUTH0_SECRET',
  FHIR_SCHEDULE_MEDICAID_ID = 'FHIR_SCHEDULE_MEDICAID_ID',
  FHIR_SCHEDULE_SELF_PAY_ID = 'FHIR_SCHEDULE_SELF_PAY_ID',
  FHIR_SCHEDULE_AETNA_ID = 'FHIR_SCHEDULE_AETNA_ID',
  CHANGE_CLIENT = 'CHANGE_CLIENT',
  CHANGE_SECRET = 'CHANGE_SECRET',
  CHANGE_API_BASE_URL = 'CHANGE_API_BASE_URL',
  SENDGRID_EMAIL_TEMPLATE_ID = 'SENDGRID_EMAIL_TEMPLATE_ID',
  SENDGRID_SPANISH_EMAIL_TEMPLATE_ID = 'SENDGRID_SPANISH_EMAIL_TEMPLATE_ID',
  SENDGRID_ERROR_EMAIL_TEMPLATE_ID = 'SENDGRID_ERROR_EMAIL_TEMPLATE_ID',
  SENDGRID_EMAIL_BCC = 'SENDGRID_EMAIL_BCC',
  S3_BUCKET_NAME = 'S3_BUCKET_NAME',
  S3_BUCKET_ACCESS_KEY = 'S3_BUCKET_ACCESS_KEY',
  S3_BUCKET_SECRET_ACCESS_KEY = 'S3_BUCKET_SECRET_ACCESS_KEY',
}
